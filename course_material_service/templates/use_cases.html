{% extends "base.html" %}

{% block title %}Use Cases & System Architecture - Agentic AI{% endblock %}

{% block head %}
<style>
    .diagram-container {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
    }

    .diagram-title {
        text-align: center;
        font-size: 1.75rem;
        font-weight: bold;
        color: #1f2937;
        margin-bottom: 1rem;
    }

    .diagram-subtitle {
        text-align: center;
        color: #6b7280;
        margin-bottom: 2rem;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
    }
</style>
{% endblock %}

{% block content %}
<div class="max-w-[1400px] mx-auto">
    <div class="mb-12 text-center">
        <h1
            class="text-5xl font-extrabold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent mb-4">
            System Use Cases & Architecture
        </h1>
        <p class="text-xl text-gray-600 max-w-4xl mx-auto">
            Comprehensive visual diagrams showing agent workflows, system architecture, and use case interactions
        </p>
    </div>

    <!-- COMPLETE SYSTEM ARCHITECTURE DIAGRAM -->
    <div class="diagram-container">
        <h2 class="diagram-title">üèóÔ∏è Complete System Architecture</h2>
        <p class="diagram-subtitle">Full end-to-end architecture showing all layers, components, and data flows</p>
        <div class="bg-white rounded-lg p-4 overflow-x-auto">
            <svg width="1300" height="1000" viewBox="0 0 1300 1000" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#4f46e5" />
                    </marker>
                    <marker id="arrow-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#059669" />
                    </marker>
                    <marker id="arrow-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#dc2626" />
                    </marker>
                    <linearGradient id="userGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="apiGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#f093fb;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#f5576c;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="agentGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#4facfe;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:1" />
                    </linearGradient>
                </defs>

                <!-- Layer 1: User Interface -->
                <rect x="50" y="50" width="250" height="900" rx="15" fill="url(#userGrad)" opacity="0.1"
                    stroke="#667eea" stroke-width="3" />
                <text x="175" y="85" text-anchor="middle" font-size="20" font-weight="bold" fill="#4338ca">USER
                    INTERFACE</text>

                <!-- Web UI -->
                <rect x="80" y="120" width="190" height="70" rx="10" fill="#fff" stroke="#667eea" stroke-width="2" />
                <text x="175" y="145" text-anchor="middle" font-size="14" font-weight="bold" fill="#1f2937">Web
                    Dashboard</text>
                <text x="175" y="165" text-anchor="middle" font-size="11" fill="#6b7280">HTML/Jinja2 Templates</text>
                <text x="175" y="180" text-anchor="middle" font-size="11" fill="#6b7280">TailwindCSS</text>

                <!-- API Client -->
                <rect x="80" y="210" width="190" height="60" rx="10" fill="#fff" stroke="#667eea" stroke-width="2" />
                <text x="175" y="235" text-anchor="middle" font-size="14" font-weight="bold" fill="#1f2937">API
                    Client</text>
                <text x="175" y="255" text-anchor="middle" font-size="11" fill="#6b7280">REST/HTTP Requests</text>

                <!-- User Actors -->
                <g transform="translate(90, 320)">
                    <circle cx="50" cy="30" r="25" fill="#e0e7ff" stroke="#4338ca" stroke-width="2" />
                    <path d="M50 55 L50 100 M25 75 L75 75 M50 100 L25 135 M50 100 L75 135" stroke="#4338ca"
                        stroke-width="2" fill="none" />
                    <text x="50" y="155" text-anchor="middle" font-size="12" font-weight="bold"
                        fill="#1f2937">Teacher</text>
                </g>
                <g transform="translate(90, 490)">
                    <circle cx="50" cy="30" r="25" fill="#d1fae5" stroke="#059669" stroke-width="2" />
                    <path d="M50 55 L50 100 M25 75 L75 75 M50 100 L25 135 M50 100 L75 135" stroke="#059669"
                        stroke-width="2" fill="none" />
                    <text x="50" y="155" text-anchor="middle" font-size="12" font-weight="bold"
                        fill="#1f2937">Student</text>
                </g>
                <g transform="translate(90, 660)">
                    <circle cx="50" cy="30" r="25" fill="#fce7f3" stroke="#be185d" stroke-width="2" />
                    <path d="M50 55 L50 100 M25 75 L75 75 M50 100 L25 135 M50 100 L75 135" stroke="#be185d"
                        stroke-width="2" fill="none" />
                    <text x="50" y="155" text-anchor="middle" font-size="12" font-weight="bold"
                        fill="#1f2937">Admin</text>
                </g>

                <!-- Layer 2: API Gateway -->
                <rect x="350" y="50" width="220" height="900" rx="15" fill="url(#apiGrad)" opacity="0.1"
                    stroke="#f5576c" stroke-width="3" />
                <text x="460" y="85" text-anchor="middle" font-size="20" font-weight="bold" fill="#be185d">API
                    GATEWAY</text>

                <!-- FastAPI -->
                <rect x="375" y="120" width="170" height="60" rx="10" fill="#fff" stroke="#f5576c" stroke-width="2" />
                <text x="460" y="145" text-anchor="middle" font-size="14" font-weight="bold" fill="#1f2937">FastAPI
                    Server</text>
                <text x="460" y="165" text-anchor="middle" font-size="11" fill="#6b7280">main.py</text>

                <!-- Routes -->
                <rect x="375" y="200" width="170" height="50" rx="10" fill="#fff" stroke="#f5576c" stroke-width="2" />
                <text x="460" y="220" text-anchor="middle" font-size="12" font-weight="bold"
                    fill="#1f2937">Routes</text>
                <text x="460" y="238" text-anchor="middle" font-size="10" fill="#6b7280">/generate-course</text>

                <!-- Middleware -->
                <rect x="375" y="270" width="170" height="50" rx="10" fill="#fff" stroke="#f5576c" stroke-width="2" />
                <text x="460" y="290" text-anchor="middle" font-size="12" font-weight="bold"
                    fill="#1f2937">Middleware</text>
                <text x="460" y="308" text-anchor="middle" font-size="10" fill="#6b7280">Auth, CORS, Logging</text>

                <!-- Validators -->
                <rect x="375" y="340" width="170" height="50" rx="10" fill="#fff" stroke="#f5576c" stroke-width="2" />
                <text x="460" y="360" text-anchor="middle" font-size="12" font-weight="bold" fill="#1f2937">Input
                    Validators</text>
                <text x="460" y="378" text-anchor="middle" font-size="10" fill="#6b7280">Pydantic Schemas</text>

                <!-- Layer 3: Agent Manager -->
                <rect x="620" y="50" width="220" height="500" rx="15" fill="#ddd6fe" opacity="0.3" stroke="#7c3aed"
                    stroke-width="3" />
                <text x="730" y="85" text-anchor="middle" font-size="20" font-weight="bold" fill="#5b21b6">AGENT
                    MANAGER</text>

                <!-- Orchestrator -->
                <rect x="645" y="120" width="170" height="70" rx="10" fill="#fff" stroke="#7c3aed" stroke-width="2" />
                <text x="730" y="145" text-anchor="middle" font-size="14" font-weight="bold"
                    fill="#1f2937">Orchestrator</text>
                <text x="730" y="163" text-anchor="middle" font-size="10" fill="#6b7280">agent_manager.py</text>
                <text x="730" y="178" text-anchor="middle" font-size="10" fill="#6b7280">Workflow Coordination</text>

                <!-- Workflow Steps -->
                <rect x="645" y="210" width="170" height="320" rx="10" fill="#faf5ff" stroke="#7c3aed" stroke-width="1"
                    stroke-dasharray="5,5" />
                <text x="730" y="235" text-anchor="middle" font-size="12" font-weight="bold" fill="#5b21b6">Execution
                    Pipeline</text>

                <text x="655" y="260" font-size="10" fill="#1f2937">1Ô∏è‚É£ Research Phase</text>
                <text x="655" y="280" font-size="10" fill="#1f2937">2Ô∏è‚É£ Planning Phase</text>
                <text x="655" y="300" font-size="10" fill="#1f2937">3Ô∏è‚É£ Review Plan</text>
                <text x="655" y="320" font-size="10" fill="#1f2937">4Ô∏è‚É£ Validate Plan</text>
                <text x="655" y="340" font-size="10" fill="#1f2937">5Ô∏è‚É£ Generate Lessons</text>
                <text x="655" y="360" font-size="10" fill="#1f2937">6Ô∏è‚É£ Review Lessons</text>
                <text x="655" y="380" font-size="10" fill="#1f2937">7Ô∏è‚É£ Generate Scripts</text>
                <text x="655" y="400" font-size="10" fill="#1f2937">8Ô∏è‚É£ Generate Videos</text>
                <text x="655" y="420" font-size="10" fill="#1f2937">9Ô∏è‚É£ Generate Quizzes</text>
                <text x="655" y="440" font-size="10" fill="#1f2937">üîü Validate All</text>
                <text x="655" y="460" font-size="10" fill="#1f2937">1Ô∏è‚É£1Ô∏è‚É£ Package & Export</text>

                <!-- Layer 4: AI Agents -->
                <rect x="890" y="50" width="360" height="500" rx="15" fill="url(#agentGrad)" opacity="0.1"
                    stroke="#0284c7" stroke-width="3" />
                <text x="1070" y="85" text-anchor="middle" font-size="20" font-weight="bold" fill="#0c4a6e">AI AGENTS
                    (8)</text>

                <!-- Agent Grid -->
                <g id="agents">
                    <!-- Research Agent -->
                    <rect x="910" y="110" width="160" height="55" rx="8" fill="#fff" stroke="#0284c7"
                        stroke-width="2" />
                    <text x="990" y="132" text-anchor="middle" font-size="12" font-weight="bold" fill="#1f2937">üîç
                        Research Agent</text>
                    <text x="990" y="148" text-anchor="middle" font-size="9" fill="#6b7280">research_agent.py</text>
                    <text x="990" y="160" text-anchor="middle" font-size="9" fill="#6b7280">Topic Analysis</text>

                    <!-- Course Planner -->
                    <rect x="1080" y="110" width="160" height="55" rx="8" fill="#fff" stroke="#0284c7"
                        stroke-width="2" />
                    <text x="1160" y="132" text-anchor="middle" font-size="12" font-weight="bold" fill="#1f2937">üìã
                        Course Planner</text>
                    <text x="1160" y="148" text-anchor="middle" font-size="9"
                        fill="#6b7280">course_planner_agent.py</text>
                    <text x="1160" y="160" text-anchor="middle" font-size="9" fill="#6b7280">Curriculum Design</text>

                    <!-- Lesson Writer -->
                    <rect x="910" y="180" width="160" height="55" rx="8" fill="#fff" stroke="#0284c7"
                        stroke-width="2" />
                    <text x="990" y="202" text-anchor="middle" font-size="12" font-weight="bold" fill="#1f2937">‚úçÔ∏è
                        Lesson Writer</text>
                    <text x="990" y="218" text-anchor="middle" font-size="9"
                        fill="#6b7280">lesson_writer_agent.py</text>
                    <text x="990" y="230" text-anchor="middle" font-size="9" fill="#6b7280">Content Creation</text>

                    <!-- Video Script -->
                    <rect x="1080" y="180" width="160" height="55" rx="8" fill="#fff" stroke="#0284c7"
                        stroke-width="2" />
                    <text x="1160" y="202" text-anchor="middle" font-size="12" font-weight="bold" fill="#1f2937">üé¨
                        Video Script</text>
                    <text x="1160" y="218" text-anchor="middle" font-size="9"
                        fill="#6b7280">video_script_agent.py</text>
                    <text x="1160" y="230" text-anchor="middle" font-size="9" fill="#6b7280">Script Writing</text>

                    <!-- Video Generator -->
                    <rect x="910" y="250" width="160" height="55" rx="8" fill="#fff" stroke="#0284c7"
                        stroke-width="2" />
                    <text x="990" y="272" text-anchor="middle" font-size="12" font-weight="bold" fill="#1f2937">üé• Video
                        Generator</text>
                    <text x="990" y="288" text-anchor="middle" font-size="9"
                        fill="#6b7280">video_generator_agent.py</text>
                    <text x="990" y="300" text-anchor="middle" font-size="9" fill="#6b7280">Video Production</text>

                    <!-- Quiz Agent -->
                    <rect x="1080" y="250" width="160" height="55" rx="8" fill="#fff" stroke="#0284c7"
                        stroke-width="2" />
                    <text x="1160" y="272" text-anchor="middle" font-size="12" font-weight="bold" fill="#1f2937">‚ùì Quiz
                        Agent</text>
                    <text x="1160" y="288" text-anchor="middle" font-size="9" fill="#6b7280">quiz_agent.py</text>
                    <text x="1160" y="300" text-anchor="middle" font-size="9" fill="#6b7280">Assessment Creation</text>

                    <!-- Review Agent -->
                    <rect x="910" y="320" width="160" height="55" rx="8" fill="#fff" stroke="#0284c7"
                        stroke-width="2" />
                    <text x="990" y="342" text-anchor="middle" font-size="12" font-weight="bold" fill="#1f2937">‚≠ê Review
                        Agent</text>
                    <text x="990" y="358" text-anchor="middle" font-size="9" fill="#6b7280">review_agent.py</text>
                    <text x="990" y="370" text-anchor="middle" font-size="9" fill="#6b7280">Quality Control</text>

                    <!-- Validation Agent -->
                    <rect x="1080" y="320" width="160" height="55" rx="8" fill="#fff" stroke="#0284c7"
                        stroke-width="2" />
                    <text x="1160" y="342" text-anchor="middle" font-size="12" font-weight="bold" fill="#1f2937">‚úÖ
                        Validation Agent</text>
                    <text x="1160" y="358" text-anchor="middle" font-size="9" fill="#6b7280">validation_agent.py</text>
                    <text x="1160" y="370" text-anchor="middle" font-size="9" fill="#6b7280">Schema Validation</text>
                </g>

                <!-- Layer 5: External Services -->
                <rect x="890" y="580" width="360" height="180" rx="15" fill="#d1fae5" opacity="0.3" stroke="#059669"
                    stroke-width="3" />
                <text x="1070" y="615" text-anchor="middle" font-size="20" font-weight="bold" fill="#064e3b">EXTERNAL
                    SERVICES</text>

                <rect x="910" y="640" width="160" height="60" rx="8" fill="#fff" stroke="#059669" stroke-width="2" />
                <text x="990" y="665" text-anchor="middle" font-size="13" font-weight="bold" fill="#1f2937">OpenAI
                    API</text>
                <text x="990" y="683" text-anchor="middle" font-size="10" fill="#6b7280">GPT-4 / GPT-3.5</text>

                <rect x="1080" y="640" width="160" height="60" rx="8" fill="#fff" stroke="#059669" stroke-width="2" />
                <text x="1160" y="665" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">MoviePy/FFmpeg</text>
                <text x="1160" y="683" text-anchor="middle" font-size="10" fill="#6b7280">Video Rendering</text>

                <rect x="910" y="710" width="330" height="40" rx="8" fill="#fff" stroke="#059669" stroke-width="2" />
                <text x="1075" y="735" text-anchor="middle" font-size="11" font-weight="bold" fill="#1f2937">gTTS
                    (Google Text-to-Speech)</text>

                <!-- Layer 6: Data Storage -->
                <rect x="620" y="580" width="220" height="370" rx="15" fill="#fef3c7" opacity="0.3" stroke="#f59e0b"
                    stroke-width="3" />
                <text x="730" y="615" text-anchor="middle" font-size="20" font-weight="bold" fill="#78350f">DATA
                    LAYER</text>

                <rect x="645" y="640" width="170" height="60" rx="8" fill="#fff" stroke="#f59e0b" stroke-width="2" />
                <text x="730" y="665" text-anchor="middle" font-size="13" font-weight="bold" fill="#1f2937">File
                    System</text>
                <text x="730" y="683" text-anchor="middle" font-size="10" fill="#6b7280">Course Materials</text>

                <rect x="645" y="710" width="170" height="60" rx="8" fill="#fff" stroke="#f59e0b" stroke-width="2" />
                <text x="730" y="735" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Templates</text>
                <text x="730" y="753" text-anchor="middle" font-size="10" fill="#6b7280">Jinja2 Files</text>

                <rect x="645" y="780" width="170" height="60" rx="8" fill="#fff" stroke="#f59e0b" stroke-width="2" />
                <text x="730" y="805" text-anchor="middle" font-size="13" font-weight="bold" fill="#1f2937">Generated
                    Videos</text>
                <text x="730" y="823" text-anchor="middle" font-size="10" fill="#6b7280">MP4 Files</text>

                <rect x="645" y="850" width="170" height="60" rx="8" fill="#fff" stroke="#f59e0b" stroke-width="2" />
                <text x="730" y="875" text-anchor="middle" font-size="13" font-weight="bold" fill="#1f2937">Export
                    Packages</text>
                <text x="730" y="893" text-anchor="middle" font-size="10" fill="#6b7280">ZIP Archives</text>

                <!-- Data Flow Arrows -->
                <line x1="270" y1="155" x2="375" y2="155" stroke="#4f46e5" stroke-width="3" marker-end="url(#arrow)" />
                <text x="322" y="145" font-size="10" fill="#4f46e5" font-weight="bold">HTTP</text>

                <line x1="545" y1="225" x2="645" y2="155" stroke="#dc2626" stroke-width="3"
                    marker-end="url(#arrow-red)" />
                <text x="580" y="180" font-size="10" fill="#dc2626" font-weight="bold">Request</text>

                <line x1="815" y1="155" x2="910" y2="137" stroke="#059669" stroke-width="3"
                    marker-end="url(#arrow-green)" />
                <text x="850" y="140" font-size="10" fill="#059669" font-weight="bold">Invoke</text>

                <line x1="990" y1="165" x2="990" y2="640" stroke="#059669" stroke-width="2" stroke-dasharray="5,5" />
                <line x1="1160" y1="165" x2="1160" y2="640" stroke="#059669" stroke-width="2" stroke-dasharray="5,5" />

                <line x1="815" y1="300" x2="890" y2="670" stroke="#f59e0b" stroke-width="2" stroke-dasharray="5,5" />
                <text x="840" y="480" font-size="9" fill="#f59e0b">Store</text>

                <!-- Response Flow -->
                <path d="M 645 500 Q 500 520 375 400" stroke="#4f46e5" stroke-width="3" fill="none"
                    marker-end="url(#arrow)" />
                <text x="480" y="450" font-size="10" fill="#4f46e5" font-weight="bold">Response</text>

                <line x1="375" y1="240" x2="270" y2="240" stroke="#4f46e5" stroke-width="3" marker-end="url(#arrow)" />
                <text x="300" y="230" font-size="10" fill="#4f46e5" font-weight="bold">JSON</text>
            </svg>
        </div>
    </div>

    <!-- AGENT WORKFLOW DIAGRAM -->
    <div class="diagram-container">
        <h2 class="diagram-title">ü§ñ Agent Workflow & Interaction</h2>
        <p class="diagram-subtitle">Detailed flow showing how 8 AI agents collaborate to generate a complete course</p>
        <div class="bg-white rounded-lg p-4 overflow-x-auto">
            <svg width="1200" height="1100" viewBox="0 0 1200 1100" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <marker id="flow-arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#6366f1" />
                    </marker>
                    <marker id="feedback-arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#ef4444" />
                    </marker>
                    <marker id="data-arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#10b981" />
                    </marker>
                </defs>

                <!-- Start -->
                <ellipse cx="600" cy="50" rx="80" ry="35" fill="#6366f1" stroke="#4f46e5" stroke-width="2" />
                <text x="600" y="58" text-anchor="middle" font-size="14" font-weight="bold" fill="#fff">START</text>

                <!-- Step 1: Research Agent -->
                <rect x="480" y="120" width="240" height="80" rx="10" fill="#fef3c7" stroke="#f59e0b"
                    stroke-width="3" />
                <text x="600" y="145" text-anchor="middle" font-size="15" font-weight="bold" fill="#1f2937">1Ô∏è‚É£ RESEARCH
                    AGENT</text>
                <text x="600" y="165" text-anchor="middle" font-size="11" fill="#6b7280">Analyzes learning
                    outcomes</text>
                <text x="600" y="180" text-anchor="middle" font-size="11" fill="#6b7280">Gathers key concepts &
                    resources</text>
                <text x="600" y="195" text-anchor="middle" font-size="10" fill="#059669">Output: research_context</text>

                <!-- Step 2: Course Planner -->
                <rect x="480" y="240" width="240" height="80" rx="10" fill="#ddd6fe" stroke="#7c3aed"
                    stroke-width="3" />
                <text x="600" y="265" text-anchor="middle" font-size="15" font-weight="bold" fill="#1f2937">2Ô∏è‚É£ COURSE
                    PLANNER</text>
                <text x="600" y="285" text-anchor="middle" font-size="11" fill="#6b7280">Creates curriculum
                    structure</text>
                <text x="600" y="300" text-anchor="middle" font-size="11" fill="#6b7280">Defines modules &
                    lessons</text>
                <text x="600" y="315" text-anchor="middle" font-size="10" fill="#059669">Output: course_plan_json</text>

                <!-- Step 3: Review Agent (Plan) -->
                <rect x="800" y="240" width="200" height="80" rx="10" fill="#fce7f3" stroke="#db2777"
                    stroke-width="3" />
                <text x="900" y="265" text-anchor="middle" font-size="15" font-weight="bold" fill="#1f2937">3Ô∏è‚É£ REVIEW
                    AGENT</text>
                <text x="900" y="285" text-anchor="middle" font-size="11" fill="#6b7280">Reviews plan quality</text>
                <text x="900" y="300" text-anchor="middle" font-size="11" fill="#6b7280">Scores & approves</text>
                <text x="900" y="315" text-anchor="middle" font-size="10" fill="#059669">Output: plan_review</text>

                <!-- Step 4: Validation Agent (Plan) -->
                <rect x="200" y="240" width="200" height="80" rx="10" fill="#d1fae5" stroke="#059669"
                    stroke-width="3" />
                <text x="300" y="265" text-anchor="middle" font-size="15" font-weight="bold" fill="#1f2937">4Ô∏è‚É£
                    VALIDATION</text>
                <text x="300" y="285" text-anchor="middle" font-size="11" fill="#6b7280">Validates schema</text>
                <text x="300" y="300" text-anchor="middle" font-size="11" fill="#6b7280">Ensures structure</text>
                <text x="300" y="315" text-anchor="middle" font-size="10" fill="#059669">Output: CoursePlan</text>

                <!-- Loop Container -->
                <rect x="150" y="360" width="900" height="480" rx="15" fill="#f3f4f6" stroke="#9ca3af" stroke-width="2"
                    stroke-dasharray="10,5" />
                <text x="600" y="390" text-anchor="middle" font-size="16" font-weight="bold" fill="#4b5563">FOR EACH
                    MODULE ‚Üí FOR EACH LESSON (Iterative Loop)</text>

                <!-- Step 5: Lesson Writer -->
                <rect x="480" y="410" width="240" height="80" rx="10" fill="#e0e7ff" stroke="#4338ca"
                    stroke-width="3" />
                <text x="600" y="435" text-anchor="middle" font-size="15" font-weight="bold" fill="#1f2937">5Ô∏è‚É£ LESSON
                    WRITER</text>
                <text x="600" y="455" text-anchor="middle" font-size="11" fill="#6b7280">Generates detailed
                    content</text>
                <text x="600" y="470" text-anchor="middle" font-size="11" fill="#6b7280">Uses research context</text>
                <text x="600" y="485" text-anchor="middle" font-size="10" fill="#059669">Output: lesson_json</text>

                <!-- Step 6: Review Agent (Lesson) -->
                <rect x="800" y="410" width="200" height="80" rx="10" fill="#fce7f3" stroke="#db2777"
                    stroke-width="3" />
                <text x="900" y="435" text-anchor="middle" font-size="15" font-weight="bold" fill="#1f2937">6Ô∏è‚É£
                    REVIEW</text>
                <text x="900" y="455" text-anchor="middle" font-size="11" fill="#6b7280">Quality check</text>
                <text x="900" y="470" text-anchor="middle" font-size="11" fill="#6b7280">Max 2 iterations</text>
                <text x="900" y="485" text-anchor="middle" font-size="10" fill="#ef4444">Feedback loop</text>

                <!-- Parallel Generation Box -->
                <rect x="180" y="530" width="840" height="290" rx="10" fill="#ecfdf5" stroke="#059669" stroke-width="2"
                    stroke-dasharray="5,5" />
                <text x="600" y="555" text-anchor="middle" font-size="14" font-weight="bold" fill="#065f46">PARALLEL
                    ASSET GENERATION</text>

                <!-- Step 7: Video Script Agent -->
                <rect x="200" y="575" width="180" height="70" rx="8" fill="#fff" stroke="#0284c7" stroke-width="2" />
                <text x="290" y="598" text-anchor="middle" font-size="13" font-weight="bold" fill="#1f2937">7Ô∏è‚É£ VIDEO
                    SCRIPT</text>
                <text x="290" y="615" text-anchor="middle" font-size="10" fill="#6b7280">Creates narrative</text>
                <text x="290" y="630" text-anchor="middle" font-size="9" fill="#059669">‚Üí script_json</text>

                <!-- Step 8: Video Generator Agent -->
                <rect x="200" y="660" width="180" height="70" rx="8" fill="#fff" stroke="#0284c7" stroke-width="2" />
                <text x="290" y="683" text-anchor="middle" font-size="13" font-weight="bold" fill="#1f2937">8Ô∏è‚É£ VIDEO
                    GEN</text>
                <text x="290" y="700" text-anchor="middle" font-size="10" fill="#6b7280">Renders video</text>
                <text x="290" y="715" text-anchor="middle" font-size="9" fill="#059669">‚Üí video_info</text>

                <!-- Step 9: Quiz Agent -->
                <rect x="410" y="575" width="180" height="70" rx="8" fill="#fff" stroke="#0284c7" stroke-width="2" />
                <text x="500" y="598" text-anchor="middle" font-size="13" font-weight="bold" fill="#1f2937">9Ô∏è‚É£ QUIZ
                    AGENT</text>
                <text x="500" y="615" text-anchor="middle" font-size="10" fill="#6b7280">Generates questions</text>
                <text x="500" y="630" text-anchor="middle" font-size="9" fill="#059669">‚Üí quiz_json</text>

                <!-- Validation boxes -->
                <rect x="620" y="575" width="180" height="70" rx="8" fill="#d1fae5" stroke="#059669" stroke-width="2" />
                <text x="710" y="598" text-anchor="middle" font-size="12" font-weight="bold"
                    fill="#1f2937">VALIDATE</text>
                <text x="710" y="615" text-anchor="middle" font-size="10" fill="#6b7280">Script validation</text>

                <rect x="620" y="660" width="180" height="70" rx="8" fill="#d1fae5" stroke="#059669" stroke-width="2" />
                <text x="710" y="683" text-anchor="middle" font-size="12" font-weight="bold"
                    fill="#1f2937">VALIDATE</text>
                <text x="710" y="700" text-anchor="middle" font-size="10" fill="#6b7280">Quiz validation</text>

                <!-- Storage -->
                <rect x="830" y="610" width="170" height="90" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" />
                <text x="915" y="635" text-anchor="middle" font-size="13" font-weight="bold" fill="#1f2937">üíæ
                    STORAGE</text>
                <text x="915" y="655" text-anchor="middle" font-size="10" fill="#6b7280">lessons[]</text>
                <text x="915" y="670" text-anchor="middle" font-size="10" fill="#6b7280">scripts[]</text>
                <text x="915" y="685" text-anchor="middle" font-size="10" fill="#6b7280">videos[]</text>
                <text x="915" y="700" text-anchor="middle" font-size="10" fill="#6b7280">quizzes[]</text>

                <!-- End of Loop -->
                <text x="600" y="830" text-anchor="middle" font-size="14" font-weight="bold" fill="#4b5563">END
                    LOOP</text>

                <!-- Step 10: Final Validation -->
                <rect x="480" y="880" width="240" height="80" rx="10" fill="#d1fae5" stroke="#059669"
                    stroke-width="3" />
                <text x="600" y="905" text-anchor="middle" font-size="15" font-weight="bold" fill="#1f2937">üîü FINAL
                    VALIDATION</text>
                <text x="600" y="925" text-anchor="middle" font-size="11" fill="#6b7280">Validates complete
                    package</text>
                <text x="600" y="940" text-anchor="middle" font-size="11" fill="#6b7280">All components verified</text>
                <text x="600" y="955" text-anchor="middle" font-size="10" fill="#059669">Output: final_validation</text>

                <!-- End -->
                <ellipse cx="600" cy="1020" rx="100" ry="40" fill="#10b981" stroke="#059669" stroke-width="2" />
                <text x="600" y="1020" text-anchor="middle" font-size="14" font-weight="bold"
                    fill="#fff">COMPLETE</text>
                <text x="600" y="1038" text-anchor="middle" font-size="11" fill="#fff">Package Ready</text>

                <!-- Flow Arrows -->
                <line x1="600" y1="85" x2="600" y2="120" stroke="#6366f1" stroke-width="3"
                    marker-end="url(#flow-arrow)" />
                <line x1="600" y1="200" x2="600" y2="240" stroke="#6366f1" stroke-width="3"
                    marker-end="url(#flow-arrow)" />
                <line x1="720" y1="280" x2="800" y2="280" stroke="#6366f1" stroke-width="2"
                    marker-end="url(#flow-arrow)" />
                <line x1="480" y1="280" x2="400" y2="280" stroke="#6366f1" stroke-width="2"
                    marker-end="url(#flow-arrow)" />
                <line x1="600" y1="320" x2="600" y2="410" stroke="#6366f1" stroke-width="3"
                    marker-end="url(#flow-arrow)" />
                <line x1="720" y1="450" x2="800" y2="450" stroke="#6366f1" stroke-width="2"
                    marker-end="url(#flow-arrow)" />

                <!-- Feedback loop -->
                <path d="M 900 410 Q 950 380 900 350 Q 850 320 600 320" stroke="#ef4444" stroke-width="2" fill="none"
                    marker-end="url(#feedback-arrow)" stroke-dasharray="5,5" />
                <text x="850" y="340" font-size="10" fill="#ef4444" font-weight="bold">Retry if rejected</text>

                <line x1="600" y1="490" x2="290" y2="575" stroke="#10b981" stroke-width="2"
                    marker-end="url(#data-arrow)" />
                <line x1="600" y1="490" x2="500" y2="575" stroke="#10b981" stroke-width="2"
                    marker-end="url(#data-arrow)" />
                <line x1="380" y1="610" x2="620" y2="610" stroke="#10b981" stroke-width="2"
                    marker-end="url(#data-arrow)" />
                <line x1="590" y1="610" x2="830" y2="655" stroke="#f59e0b" stroke-width="2"
                    marker-end="url(#data-arrow)" />
                <line x1="290" y1="645" x2="290" y2="660" stroke="#6366f1" stroke-width="2"
                    marker-end="url(#flow-arrow)" />
                <line x1="380" y1="695" x2="620" y2="695" stroke="#10b981" stroke-width="2"
                    marker-end="url(#data-arrow)" />
                <line x1="590" y1="695" x2="830" y2="670" stroke="#f59e0b" stroke-width="2"
                    marker-end="url(#data-arrow)" />

                <line x1="600" y1="840" x2="600" y2="880" stroke="#6366f1" stroke-width="3"
                    marker-end="url(#flow-arrow)" />
                <line x1="600" y1="960" x2="600" y2="980" stroke="#6366f1" stroke-width="3"
                    marker-end="url(#flow-arrow)" />

                <!-- Legend -->
                <rect x="50" y="1050" width="1100" height="40" fill="#f9fafb" stroke="#d1d5db" stroke-width="1"
                    rx="5" />
                <line x1="80" y1="1070" x2="130" y2="1070" stroke="#6366f1" stroke-width="3"
                    marker-end="url(#flow-arrow)" />
                <text x="140" y="1075" font-size="11" fill="#1f2937">Main Flow</text>

                <line x1="250" y1="1070" x2="300" y2="1070" stroke="#ef4444" stroke-width="2"
                    marker-end="url(#feedback-arrow)" stroke-dasharray="5,5" />
                <text x="310" y="1075" font-size="11" fill="#1f2937">Feedback Loop</text>

                <line x1="440" y1="1070" x2="490" y2="1070" stroke="#10b981" stroke-width="2"
                    marker-end="url(#data-arrow)" />
                <text x="500" y="1075" font-size="11" fill="#1f2937">Data Flow</text>
            </svg>
        </div>
    </div>

    <!-- USE CASE DIAGRAM 1: Course Generation -->
    <div class="diagram-container">
        <h2 class="diagram-title">üìö Use Case 1: Course Generation Flow</h2>
        <p class="diagram-subtitle">Teacher generates a complete course with AI assistance</p>
        <div class="bg-white rounded-lg p-4 overflow-x-auto">
            <svg width="1000" height="700" viewBox="0 0 1000 700" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <marker id="uc-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#6b7280" />
                    </marker>
                </defs>

                <!-- System Boundary -->
                <rect x="250" y="50" width="700" height="600" rx="15" fill="#f9fafb" stroke="#4f46e5" stroke-width="3"
                    stroke-dasharray="10,5" />
                <text x="600" y="85" text-anchor="middle" font-size="22" font-weight="bold" fill="#4338ca">Agentic
                    Course Generator System</text>

                <!-- Actor: Teacher -->
                <g transform="translate(80, 280)">
                    <circle cx="40" cy="35" r="30" fill="#e0e7ff" stroke="#4338ca" stroke-width="3" />
                    <path d="M40 65 L40 130 M5 95 L75 95 M40 130 L5 180 M40 130 L75 180" stroke="#4338ca"
                        stroke-width="3" fill="none" />
                    <text x="40" y="210" text-anchor="middle" font-size="16" font-weight="bold"
                        fill="#1f2937">Teacher</text>
                </g>

                <!-- Use Cases -->
                <ellipse cx="400" cy="150" rx="120" ry="45" fill="#fff" stroke="#4f46e5" stroke-width="2" />
                <text x="400" y="145" text-anchor="middle" font-size="13" font-weight="bold" fill="#1f2937">Input
                    Learning</text>
                <text x="400" y="162" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Outcomes</text>

                <ellipse cx="600" cy="150" rx="120" ry="45" fill="#fff" stroke="#4f46e5" stroke-width="2" />
                <text x="600" y="145" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Configure</text>
                <text x="600" y="162" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Settings</text>

                <ellipse cx="800" cy="150" rx="120" ry="45" fill="#fff" stroke="#4f46e5" stroke-width="2" />
                <text x="800" y="145" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Submit</text>
                <text x="800" y="162" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Request</text>

                <ellipse cx="400" cy="280" rx="120" ry="45" fill="#fff" stroke="#7c3aed" stroke-width="2" />
                <text x="400" y="275" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Generate</text>
                <text x="400" y="292" text-anchor="middle" font-size="13" font-weight="bold" fill="#1f2937">Course
                    Plan</text>

                <ellipse cx="600" cy="280" rx="120" ry="45" fill="#fff" stroke="#7c3aed" stroke-width="2" />
                <text x="600" y="275" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Create</text>
                <text x="600" y="292" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Lessons</text>

                <ellipse cx="800" cy="280" rx="120" ry="45" fill="#fff" stroke="#7c3aed" stroke-width="2" />
                <text x="800" y="275" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Generate</text>
                <text x="800" y="292" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Videos</text>

                <ellipse cx="400" cy="410" rx="120" ry="45" fill="#fff" stroke="#0284c7" stroke-width="2" />
                <text x="400" y="405" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Create</text>
                <text x="400" y="422" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Quizzes</text>

                <ellipse cx="600" cy="410" rx="120" ry="45" fill="#fff" stroke="#0284c7" stroke-width="2" />
                <text x="600" y="405" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Review</text>
                <text x="600" y="422" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Content</text>

                <ellipse cx="800" cy="410" rx="120" ry="45" fill="#fff" stroke="#0284c7" stroke-width="2" />
                <text x="800" y="405" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Validate</text>
                <text x="800" y="422" text-anchor="middle" font-size="13" font-weight="bold"
                    fill="#1f2937">Package</text>

                <ellipse cx="500" cy="540" rx="130" ry="45" fill="#fff" stroke="#059669" stroke-width="3" />
                <text x="500" y="535" text-anchor="middle" font-size="14" font-weight="bold"
                    fill="#1f2937">Download</text>
                <text x="500" y="552" text-anchor="middle" font-size="14" font-weight="bold" fill="#1f2937">Course
                    Package</text>

                <!-- Connections from Teacher -->
                <line x1="155" y1="320" x2="290" y2="160" stroke="#6b7280" stroke-width="2"
                    marker-end="url(#uc-arrow)" />
                <line x1="155" y1="320" x2="490" y2="160" stroke="#6b7280" stroke-width="2"
                    marker-end="url(#uc-arrow)" />
                <line x1="155" y1="320" x2="690" y2="160" stroke="#6b7280" stroke-width="2"
                    marker-end="url(#uc-arrow)" />
                <line x1="155" y1="340" x2="380" y2="540" stroke="#6b7280" stroke-width="2"
                    marker-end="url(#uc-arrow)" />

                <!-- Include relationships -->
                <line x1="520" y1="180" x2="480" y2="250" stroke="#9ca3af" stroke-width="1.5" stroke-dasharray="5,5" />
                <text x="500" y="210" font-size="10" fill="#6b7280">¬´include¬ª</text>

                <line x1="680" y1="180" x2="620" y2="250" stroke="#9ca3af" stroke-width="1.5" stroke-dasharray="5,5" />
                <text x="650" y="210" font-size="10" fill="#6b7280">¬´include¬ª</text>

                <line x1="780" y1="195" x2="780" y2="235" stroke="#9ca3af" stroke-width="1.5" stroke-dasharray="5,5" />
                <text x="790" y="220" font-size="10" fill="#6b7280">¬´include¬ª</text>

                <line x1="420" y1="325" x2="420" y2="365" stroke="#9ca3af" stroke-width="1.5" stroke-dasharray="5,5" />
                <text x="430" y="350" font-size="10" fill="#6b7280">¬´include¬ª</text>

                <line x1="600" y1="325" x2="600" y2="365" stroke="#9ca3af" stroke-width="1.5" stroke-dasharray="5,5" />
                <text x="610" y="350" font-size="10" fill="#6b7280">¬´include¬ª</text>

                <line x1="780" y1="325" x2="780" y2="365" stroke="#9ca3af" stroke-width="1.5" stroke-dasharray="5,5" />
                <text x="790" y="350" font-size="10" fill="#6b7280">¬´include¬ª</text>

                <line x1="520" y1="450" x2="520" y2="495" stroke="#9ca3af" stroke-width="1.5" stroke-dasharray="5,5" />
                <text x="530" y="475" font-size="10" fill="#6b7280">¬´include¬ª</text>
            </svg>
        </div>
    </div>

    <!-- USE CASE DIAGRAM 2: Student & Admin -->
    <div class="diagram-container">
        <h2 class="diagram-title">üë• Use Case 2: Multi-Actor Interactions</h2>
        <p class="diagram-subtitle">Student learning and admin management use cases</p>
        <div class="bg-white rounded-lg p-4 overflow-x-auto">
            <svg width="1000" height="600" viewBox="0 0 1000 600" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <marker id="uc2-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#6b7280" />
                    </marker>
                </defs>

                <!-- System Boundary -->
                <rect x="250" y="50" width="700" height="500" rx="15" fill="#f9fafb" stroke="#059669" stroke-width="3"
                    stroke-dasharray="10,5" />
                <text x="600" y="85" text-anchor="middle" font-size="22" font-weight="bold" fill="#064e3b">Learning &
                    Management System</text>

                <!-- Actor: Student -->
                <g transform="translate(80, 150)">
                    <circle cx="40" cy="35" r="30" fill="#d1fae5" stroke="#059669" stroke-width="3" />
                    <path d="M40 65 L40 130 M5 95 L75 95 M40 130 L5 180 M40 130 L75 180" stroke="#059669"
                        stroke-width="3" fill="none" />
                    <text x="40" y="210" text-anchor="middle" font-size="16" font-weight="bold"
                        fill="#1f2937">Student</text>
                </g>

                <!-- Actor: Admin -->
                <g transform="translate(80, 370)">
                    <circle cx="40" cy="35" r="30" fill="#fce7f3" stroke="#be185d" stroke-width="3" />
                    <path d="M40 65 L40 130 M5 95 L75 95 M40 130 L5 180 M40 130 L75 180" stroke="#be185d"
                        stroke-width="3" fill="none" />
                    <text x="40" y="210" text-anchor="middle" font-size="16" font-weight="bold"
                        fill="#1f2937">Admin</text>
                </g>

                <!-- Student Use Cases -->
                <ellipse cx="400" cy="150" rx="110" ry="40" fill="#fff" stroke="#059669" stroke-width="2" />
                <text x="400" y="145" text-anchor="middle" font-size="12" font-weight="bold"
                    fill="#1f2937">Access</text>
                <text x="400" y="162" text-anchor="middle" font-size="12" font-weight="bold"
                    fill="#1f2937">Course</text>

                <ellipse cx="600" cy="150" rx="110" ry="40" fill="#fff" stroke="#059669" stroke-width="2" />
                <text x="600" y="145" text-anchor="middle" font-size="12" font-weight="bold" fill="#1f2937">Watch</text>
                <text x="600" y="162" text-anchor="middle" font-size="12" font-weight="bold"
                    fill="#1f2937">Videos</text>

                <ellipse cx="800" cy="150" rx="110" ry="40" fill="#fff" stroke="#059669" stroke-width="2" />
                <text x="800" y="145" text-anchor="middle" font-size="12" font-weight="bold" fill="#1f2937">Take</text>
                <text x="800" y="162" text-anchor="middle" font-size="12" font-weight="bold"
                    fill="#1f2937">Quizzes</text>

                <ellipse cx="500" cy="250" rx="110" ry="40" fill="#fff" stroke="#059669" stroke-width="2" />
                <text x="500" y="245" text-anchor="middle" font-size="12" font-weight="bold" fill="#1f2937">Track</text>
                <text x="500" y="262" text-anchor="middle" font-size="12" font-weight="bold"
                    fill="#1f2937">Progress</text>

                <!-- Admin Use Cases -->
                <ellipse cx="400" cy="380" rx="110" ry="40" fill="#fff" stroke="#be185d" stroke-width="2" />
                <text x="400" y="375" text-anchor="middle" font-size="12" font-weight="bold"
                    fill="#1f2937">Manage</text>
                <text x="400" y="392" text-anchor="middle" font-size="12" font-weight="bold" fill="#1f2937">Users</text>

                <ellipse cx="600" cy="380" rx="110" ry="40" fill="#fff" stroke="#be185d" stroke-width="2" />
                <text x="600" y="375" text-anchor="middle" font-size="12" font-weight="bold" fill="#1f2937">View</text>
                <text x="600" y="392" text-anchor="middle" font-size="12" font-weight="bold" fill="#1f2937">Logs</text>

                <ellipse cx="800" cy="380" rx="110" ry="40" fill="#fff" stroke="#be185d" stroke-width="2" />
                <text x="800" y="375" text-anchor="middle" font-size="12" font-weight="bold"
                    fill="#1f2937">Configure</text>
                <text x="800" y="392" text-anchor="middle" font-size="12" font-weight="bold"
                    fill="#1f2937">System</text>

                <ellipse cx="500" cy="480" rx="110" ry="40" fill="#fff" stroke="#be185d" stroke-width="2" />
                <text x="500" y="475" text-anchor="middle" font-size="12" font-weight="bold"
                    fill="#1f2937">Monitor</text>
                <text x="500" y="492" text-anchor="middle" font-size="12" font-weight="bold"
                    fill="#1f2937">Performance</text>

                <!-- Connections -->
                <line x1="155" y1="230" x2="300" y2="160" stroke="#6b7280" stroke-width="2"
                    marker-end="url(#uc2-arrow)" />
                <line x1="155" y1="230" x2="500" y2="160" stroke="#6b7280" stroke-width="2"
                    marker-end="url(#uc2-arrow)" />
                <line x1="155" y1="230" x2="700" y2="160" stroke="#6b7280" stroke-width="2"
                    marker-end="url(#uc2-arrow)" />
                <line x1="155" y1="240" x2="400" y2="250" stroke="#6b7280" stroke-width="2"
                    marker-end="url(#uc2-arrow)" />

                <line x1="155" y1="450" x2="300" y2="390" stroke="#6b7280" stroke-width="2"
                    marker-end="url(#uc2-arrow)" />
                <line x1="155" y1="450" x2="500" y2="390" stroke="#6b7280" stroke-width="2"
                    marker-end="url(#uc2-arrow)" />
                <line x1="155" y1="450" x2="700" y2="390" stroke="#6b7280" stroke-width="2"
                    marker-end="url(#uc2-arrow)" />
                <line x1="155" y1="460" x2="400" y2="480" stroke="#6b7280" stroke-width="2"
                    marker-end="url(#uc2-arrow)" />
            </svg>
        </div>
    </div>

    <!-- DATABASE SCHEMA DIAGRAM (UML) -->
    <div class="diagram-container">
        <h2 class="diagram-title">üóÑÔ∏è Database Schema (UML Class Diagram)</h2>
        <p class="diagram-subtitle">UML representation of the system's data models and relationships</p>
        <div class="bg-white rounded-lg p-4 overflow-x-auto">
            <svg width="1100" height="900" viewBox="0 0 1100 900" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <!-- UML Composition Diamond (Filled) -->
                    <marker id="uml-composition" markerWidth="16" markerHeight="12" refX="16" refY="6" orient="auto">
                        <path d="M0,6 L8,0 L16,6 L8,12 Z" fill="#1f2937" stroke="#1f2937" stroke-width="1" />
                    </marker>
                    <!-- UML Association Arrow (Open) -->
                    <marker id="uml-association" markerWidth="12" markerHeight="12" refX="0" refY="6" orient="auto">
                        <path d="M0,6 L10,6" stroke="#1f2937" stroke-width="1" fill="none" />
                    </marker>
                </defs>

                <style>
                    .uml-class {
                        fill: #ffffff;
                        stroke: #1f2937;
                        stroke-width: 2;
                    }

                    .uml-header {
                        fill: #f3f4f6;
                        stroke: #1f2937;
                        stroke-width: 1;
                    }

                    .uml-text {
                        font-family: monospace;
                        font-size: 12px;
                        fill: #1f2937;
                    }

                    .uml-title {
                        font-family: sans-serif;
                        font-size: 14px;
                        font-weight: bold;
                        fill: #000;
                        text-anchor: middle;
                    }

                    .uml-line {
                        stroke: #1f2937;
                        stroke-width: 1.5;
                        fill: none;
                    }
                </style>

                <!-- User Class -->
                <g transform="translate(50, 50)">
                    <rect x="0" y="0" width="220" height="160" class="uml-class" />
                    <rect x="0" y="0" width="220" height="30" class="uml-header" />
                    <text x="110" y="20" class="uml-title">User</text>
                    <line x1="0" y1="30" x2="220" y2="30" stroke="#1f2937" stroke-width="1" />

                    <text x="10" y="50" class="uml-text">+ id: Integer [PK]</text>
                    <text x="10" y="70" class="uml-text">+ email: String</text>
                    <text x="10" y="90" class="uml-text">+ hashed_password: String</text>
                    <text x="10" y="110" class="uml-text">+ full_name: String</text>
                    <text x="10" y="130" class="uml-text">+ is_admin: Boolean</text>
                    <text x="10" y="150" class="uml-text">+ created_at: DateTime</text>
                </g>

                <!-- Enrollment Class -->
                <g transform="translate(400, 50)">
                    <rect x="0" y="0" width="220" height="120" class="uml-class" />
                    <rect x="0" y="0" width="220" height="30" class="uml-header" />
                    <text x="110" y="20" class="uml-title">Enrollment</text>
                    <line x1="0" y1="30" x2="220" y2="30" stroke="#1f2937" stroke-width="1" />

                    <text x="10" y="50" class="uml-text">+ id: Integer [PK]</text>
                    <text x="10" y="70" class="uml-text">+ user_id: Integer [FK]</text>
                    <text x="10" y="90" class="uml-text">+ course_id: Integer [FK]</text>
                    <text x="10" y="110" class="uml-text">+ progress_percent: Float</text>
                </g>

                <!-- Course Class -->
                <g transform="translate(750, 50)">
                    <rect x="0" y="0" width="240" height="180" class="uml-class" />
                    <rect x="0" y="0" width="240" height="30" class="uml-header" />
                    <text x="120" y="20" class="uml-title">Course</text>
                    <line x1="0" y1="30" x2="240" y2="30" stroke="#1f2937" stroke-width="1" />

                    <text x="10" y="50" class="uml-text">+ id: Integer [PK]</text>
                    <text x="10" y="70" class="uml-text">+ title: String</text>
                    <text x="10" y="90" class="uml-text">+ description: Text</text>
                    <text x="10" y="110" class="uml-text">+ learning_outcomes: JSON</text>
                    <text x="10" y="130" class="uml-text">+ thumbnail_url: String</text>
                    <text x="10" y="150" class="uml-text">+ is_published: Boolean</text>
                    <text x="10" y="170" class="uml-text">+ created_at: DateTime</text>
                </g>

                <!-- CourseModule Class -->
                <g transform="translate(750, 300)">
                    <rect x="0" y="0" width="240" height="120" class="uml-class" />
                    <rect x="0" y="0" width="240" height="30" class="uml-header" />
                    <text x="120" y="20" class="uml-title">CourseModule</text>
                    <line x1="0" y1="30" x2="240" y2="30" stroke="#1f2937" stroke-width="1" />

                    <text x="10" y="50" class="uml-text">+ id: Integer [PK]</text>
                    <text x="10" y="70" class="uml-text">+ course_id: Integer [FK]</text>
                    <text x="10" y="90" class="uml-text">+ title: String</text>
                    <text x="10" y="110" class="uml-text">+ order_index: Integer</text>
                </g>

                <!-- Lesson Class -->
                <g transform="translate(750, 500)">
                    <rect x="0" y="0" width="240" height="140" class="uml-class" />
                    <rect x="0" y="0" width="240" height="30" class="uml-header" />
                    <text x="120" y="20" class="uml-title">Lesson</text>
                    <line x1="0" y1="30" x2="240" y2="30" stroke="#1f2937" stroke-width="1" />

                    <text x="10" y="50" class="uml-text">+ id: Integer [PK]</text>
                    <text x="10" y="70" class="uml-text">+ module_id: Integer [FK]</text>
                    <text x="10" y="90" class="uml-text">+ title: String</text>
                    <text x="10" y="110" class="uml-text">+ content: Text</text>
                    <text x="10" y="130" class="uml-text">+ duration_minutes: Integer</text>
                </g>

                <!-- LessonAsset Class -->
                <g transform="translate(400, 500)">
                    <rect x="0" y="0" width="220" height="120" class="uml-class" />
                    <rect x="0" y="0" width="220" height="30" class="uml-header" />
                    <text x="110" y="20" class="uml-title">LessonAsset</text>
                    <line x1="0" y1="30" x2="220" y2="30" stroke="#1f2937" stroke-width="1" />

                    <text x="10" y="50" class="uml-text">+ id: Integer [PK]</text>
                    <text x="10" y="70" class="uml-text">+ lesson_id: Integer [FK]</text>
                    <text x="10" y="90" class="uml-text">+ asset_type: String</text>
                    <text x="10" y="110" class="uml-text">+ file_path: String</text>
                </g>

                <!-- QuizAttempt Class -->
                <g transform="translate(50, 500)">
                    <rect x="0" y="0" width="220" height="140" class="uml-class" />
                    <rect x="0" y="0" width="220" height="30" class="uml-header" />
                    <text x="110" y="20" class="uml-title">QuizAttempt</text>
                    <line x1="0" y1="30" x2="220" y2="30" stroke="#1f2937" stroke-width="1" />

                    <text x="10" y="50" class="uml-text">+ id: Integer [PK]</text>
                    <text x="10" y="70" class="uml-text">+ user_id: Integer [FK]</text>
                    <text x="10" y="90" class="uml-text">+ asset_id: Integer [FK]</text>
                    <text x="10" y="110" class="uml-text">+ score: Float</text>
                    <text x="10" y="130" class="uml-text">+ attempted_at: DateTime</text>
                </g>

                <!-- LessonCompletion Class -->
                <g transform="translate(400, 300)">
                    <rect x="0" y="0" width="220" height="100" class="uml-class" />
                    <rect x="0" y="0" width="220" height="30" class="uml-header" />
                    <text x="110" y="20" class="uml-title">LessonCompletion</text>
                    <line x1="0" y1="30" x2="220" y2="30" stroke="#1f2937" stroke-width="1" />

                    <text x="10" y="50" class="uml-text">+ id: Integer [PK]</text>
                    <text x="10" y="70" class="uml-text">+ user_id: Integer [FK]</text>
                    <text x="10" y="90" class="uml-text">+ lesson_id: Integer [FK]</text>
                </g>

                <!-- Relationships -->

                <!-- User - Enrollment (1..*) -->
                <path d="M 270 110 L 400 110" class="uml-line" />
                <text x="280" y="100" class="uml-text">1</text>
                <text x="380" y="100" class="uml-text">*</text>

                <!-- Course - Enrollment (1..*) -->
                <path d="M 750 110 L 620 110" class="uml-line" />
                <text x="730" y="100" class="uml-text">1</text>
                <text x="630" y="100" class="uml-text">*</text>

                <!-- Course - Module (Composition) -->
                <path d="M 870 230 L 870 300" class="uml-line" marker-start="url(#uml-composition)" />
                <text x="880" y="250" class="uml-text">1</text>
                <text x="880" y="290" class="uml-text">*</text>

                <!-- Module - Lesson (Composition) -->
                <path d="M 870 420 L 870 500" class="uml-line" marker-start="url(#uml-composition)" />
                <text x="880" y="440" class="uml-text">1</text>
                <text x="880" y="490" class="uml-text">*</text>

                <!-- Lesson - Asset (Composition) -->
                <path d="M 750 560 L 620 560" class="uml-line" marker-start="url(#uml-composition)" />
                <text x="730" y="550" class="uml-text">1</text>
                <text x="630" y="550" class="uml-text">*</text>

                <!-- User - QuizAttempt (1..*) -->
                <path d="M 110 210 L 110 500" class="uml-line" />
                <text x="120" y="230" class="uml-text">1</text>
                <text x="120" y="490" class="uml-text">*</text>

                <!-- Asset - QuizAttempt (1..*) -->
                <path d="M 400 560 L 270 560" class="uml-line" />
                <text x="380" y="550" class="uml-text">1</text>
                <text x="280" y="550" class="uml-text">*</text>

                <!-- User - Completion (1..*) -->
                <path d="M 270 130 L 320 130 L 320 350 L 400 350" class="uml-line" fill="none" />
                <text x="280" y="120" class="uml-text">1</text>
                <text x="380" y="340" class="uml-text">*</text>

                <!-- Lesson - Completion (1..*) -->
                <path d="M 750 520 L 680 520 L 680 350 L 620 350" class="uml-line" fill="none" />
                <text x="730" y="510" class="uml-text">1</text>
                <text x="630" y="340" class="uml-text">*</text>

            </svg>
        </div>
    </div>

</div>
{% endblock %}