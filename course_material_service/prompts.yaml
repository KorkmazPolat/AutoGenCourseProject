video_script:
  description: "Generates a JSON-formatted brief for a video lesson."
  response_format: &video_script_format
    type: object
    properties:
      hook:
        type: string
        description: "Two-sentence hook that captures attention."
      outline:
        type: array
        items:
          type: object
          properties:
            timestamp:
              type: string
              description: "Time code in mm:ss format."
            topic:
              type: string
              description: "Segment topic."
      narration:
        type: array
        items:
          type: object
          properties:
            section:
              type: string
              description: "Section heading."
            summary:
              type: string
              description: "Short description."
            script:
              type: string
              description: "Narration text."
      presentation:
        type: array
        description: "Key presentation pages pairing visuals with narration."
        items:
          type: object
          properties:
            page:
              type: integer
              description: "Page number in the presentation sequence."
            heading:
              type: string
              description: "Slide or page heading."
            content:
              type: string
              description: "On-screen text or bullet points for the page."
            visual_hints:
              type: array
              description: "Up to 3 short visual hints (e.g., icon or imagery keywords)."
              items:
                type: string
            content_blocks:
              type: array
              description: "Structured blocks to render richer on-screen content."
              items:
                type: object
                properties:
                  type:
                    type: string
                    description: "One of: bullets, checklist, callout, quote, example."
                  items:
                    type: array
                    items:
                      type: string
                    description: "List items for bullets/checklist."
                  text:
                    type: string
                    description: "Text content for callout/quote/example."
                  title:
                    type: string
                    description: "Optional title for example blocks."
          required:
            - page
            - heading
            - content
      recap:
        type: string
        description: "Closing recap summarizing all outcomes."
      call_to_action:
        type: string
        description: "Suggested next step for learners."
    required:
      - hook
      - outline
      - narration
      - presentation
      - recap
      - call_to_action
  messages:
    - role: system
      template: |
        You are an expert instructional designer crafting an energetic video lesson plan.
        Always respond in minified JSON and strictly follow this schema:
        {
          "hook": "string",
          "outline": [
            {"timestamp": "mm:ss", "topic": "string"}
          ],
          "narration": [
            {"section": "string", "summary": "string", "script": "string"}
          ],
          "presentation": [
            {"page": 1, "heading": "string", "content": "string", "visual_hints": ["string"], "content_blocks": [
              {"type": "bullets", "items": ["string"]},
              {"type": "checklist", "items": ["string"]},
              {"type": "callout", "text": "string"},
              {"type": "quote", "text": "string"},
              {"type": "example", "title": "string", "text": "string"}
            ]}
          ],
          "recap": "string",
          "call_to_action": "string"
        }
        Ensure each learning outcome is covered in the narration and that every presentation page pairs heading and on-screen content with the spoken script.
        Content quality requirements:
        - Use the target duration to determine depth: include at least {{ target_segment_count }} outline segments and produce narration totaling no fewer than {{ target_word_count }} words (≈130 spoken words per minute).
        - Each narration "script" entry must be 5+ sentences and include: concrete examples, brief caselets, numbers where appropriate, and smooth transitions. Use rhetorical questions and summaries to reinforce key points.
        - For each presentation page, keep the heading snappy (3–6 words) and write 3–6 concise bullet lines for "content". Each bullet ≤ 12 words, written for on-screen readability (no full sentences, no jargon, active phrasing).
        - Include an optional "visual_hints" array (max 3) with short keywords for visuals/icons (e.g., "timeline", "bar chart", "warning").
        - Additionally include a "content_blocks" array to structure on‑screen elements. Prefer:
          - bullets: short items aligned to the section’s goal
          - checklist: 3–5 actionable steps
          - callout: 1–2 sentence tip or caution with a verb
          - quote: a memorable, attribution‑free line reinforcing the point
          - example: a brief real‑world case with numbers
        - Ensure content is directly relevant to the learning outcomes and key topics for the module; avoid generic filler.
        - Avoid filler; emphasize clarity, structure, and learner outcomes.
    - role: user
      template: |
        Course Title: {{ course_title }}
        Audience: {{ audience or "General learners" }}
        Desired Tone: {{ tone or "Professional and friendly" }}
        Target Video Duration: {{ duration_minutes or "10" }} minutes
        {% if module_title %}
        Module Focus: {{ module_title }}
        {% endif %}
        {% if module_summary %}
        Module Summary: {{ module_summary }}
        {% endif %}
        {% if module_topics %}
        Key Topics:
        {% for topic in module_topics %}
        - {{ topic }}
        {% endfor %}
        {% endif %}
        Minimum Narration Word Count: {{ target_word_count }}
        Minimum Outline Segments: {{ target_segment_count }}
        Learning Outcomes:
        {% for outcome in learning_outcomes %}
        - {{ outcome }}
        {% endfor %}
        Produce the JSON response now.

quiz_questions:
  description: "Generates high-quality, contextually aligned multiple-choice quiz questions."
  response_format: &quiz_format
    type: object
    properties:
      questions:
        type: array
        items:
          type: object
          properties:
            id:
              type: string
              description: "Stable identifier for the question."
            learning_outcome:
              type: string
              description: "Outcome the question assesses."
            stem:
              type: string
              description: "Question text."
            choices:
              type: array
              items:
                type: object
                properties:
                  label:
                    type: string
                    description: "Option label (A, B, C, D)."
                  text:
                    type: string
                    description: "Option text."
            answer:
              type: string
              description: "Correct option label."
            rationale:
              type: string
              description: "Why the answer is correct."
        minItems: 5
      remediation:
        type: string
        description: "Advice for learners scoring poorly."
    required:
      - questions
      - remediation
  messages:
    - role: system
      template: |
        You are an expert instructional designer creating **accurate, relevant, and pedagogically sound** multiple-choice quiz questions for online courses.
        Each question must:
        - Be directly tied to the module’s learning outcomes and key topics.
        - Be factually correct, clearly written, and free of ambiguity.
        - Test understanding and application, not simple recall.
        - Contain exactly four distinct options labeled A–D.
        - Include one clearly correct answer and a concise rationale explaining why.
        Avoid generic, unrealistic, or repetitive questions. 
        Output must be valid **minified JSON** following this schema:
        {
          "questions": [
            {
              "id": "q1",
              "learning_outcome": "string",
              "stem": "string",
              "choices": [
                {"label": "A", "text": "string"},
                {"label": "B", "text": "string"},
                {"label": "C", "text": "string"},
                {"label": "D", "text": "string"}
              ],
              "answer": "A",
              "rationale": "string"
            }
          ],
          "remediation": "string"
        }
        Include at least one question from each Bloom's level: Remember, Apply, and Analyze.
    - role: user
      template: |
        Course Title: {{ course_title }}
        Audience: {{ audience or "General learners" }}
        Tone: {{ tone or "Supportive and professional" }}
        {% if module_title %}
        Module Focus: {{ module_title }}
        {% endif %}
        {% if module_summary %}
        Module Summary: {{ module_summary }}
        {% endif %}
        {% if module_topics %}
        Key Topics:
        {% for topic in module_topics %}
        - {{ topic }}
        {% endfor %}
        {% endif %}
        Learning Outcomes:
        {% for outcome in learning_outcomes %}
        - {{ outcome }}
        {% endfor %}
        Produce 5 multiple-choice questions with detailed rationales and a brief remediation section.
        Return the JSON response now.


reading_material:
  description: "Generates a structured reading handout in JSON."
  response_format: &reading_format
    type: object
    properties:
      summary:
        type: string
        description: "Short executive summary."
      sections:
        type: array
        items:
          type: object
          properties:
            heading:
              type: string
              description: "Section title."
            key_points:
              type: array
              items:
                type: string
              description: "Bullet-style highlights."
            content:
              type: string
              description: "Concise explanation paragraph."
            outcome_alignment:
              type: array
              items:
                type: string
              description: "Learning outcomes covered."
      examples:
        type: array
        items:
          type: object
          properties:
            title:
              type: string
            description:
              type: string
            outcome_alignment:
              type: array
              items:
                type: string
      glossary:
        type: array
        items:
          type: object
          properties:
            term:
              type: string
            definition:
              type: string
      reflections:
        type: array
        items:
          type: string
    required:
      - summary
      - sections
      - glossary
      - reflections
  messages:
    - role: system
      template: |
        You are a technical writer producing an accessible yet rigorous handout.
        Respond only with minified JSON conforming to this schema:
        {
          "summary": "string",
          "sections": [
            {
              "heading": "string",
              "key_points": ["string"],
              "content": "string",
              "outcome_alignment": ["string"]
            }
          ],
          "examples": [
            {
              "title": "string",
              "description": "string",
              "outcome_alignment": ["string"]
            }
          ],
          "glossary": [
            {"term": "string", "definition": "string"}
          ],
          "reflections": ["string"]
        }
        Cover every learning outcome across sections and examples.
    - role: user
      template: |
        Course Title: {{ course_title }}
        Audience: {{ audience or "General learners" }}
        Tone: {{ tone or "Approachable yet authoritative" }}
        {% if module_title %}
        Module Focus: {{ module_title }}
        {% endif %}
        {% if module_summary %}
        Module Summary: {{ module_summary }}
        {% endif %}
        {% if module_topics %}
        Key Topics:
        {% for topic in module_topics %}
        - {{ topic }}
        {% endfor %}
        {% endif %}
        Learning Outcomes:
        {% for outcome in learning_outcomes %}
        - {{ outcome }}
        {% endfor %}
        Provide the JSON handout now.

project_assignment:
  description: "Creates a JSON brief for a practical assignment."
  response_format: &project_format
    type: object
    properties:
      scenario:
        type: string
        description: "Narrative framing for the project."
      tasks:
        type: array
        items:
          type: object
          properties:
            step:
              type: integer
            instructions:
              type: string
            outcome_alignment:
              type: string
      deliverables:
        type: array
        items:
          type: string
      rubric:
        type: array
        items:
          type: object
          properties:
            criterion:
              type: string
            levels:
              type: array
              items:
                type: object
                properties:
                  level:
                    type: string
                  description:
                    type: string
      stretch_goal:
        type: string
      checklist:
        type: array
        items:
          type: string
    required:
      - scenario
      - tasks
      - deliverables
      - rubric
      - checklist
  messages:
    - role: system
      template: |
        You are designing a project brief that drives applied mastery.
        Return ONLY minified JSON that matches this schema:
        {
          "scenario": "string",
          "tasks": [{"step": 1, "instructions": "string", "outcome_alignment": "string"}],
          "deliverables": ["string"],
          "rubric": [
            {
              "criterion": "string",
              "levels": [
                {"level": "Exceeds", "description": "string"},
                {"level": "Meets", "description": "string"},
                {"level": "Needs Improvement", "description": "string"}
              ]
            }
          ],
          "stretch_goal": "string",
          "checklist": ["string"]
        }
        Align each task with a learning outcome.
    - role: user
      template: |
        Course Title: {{ course_title }}
        Audience: {{ audience or "General learners" }}
        Expected Effort: {{ project_duration or "6-8 hours" }}
        Learning Outcomes:
        {% for outcome in learning_outcomes %}
        - {{ outcome }}
        {% endfor %}
        Produce the JSON brief now.

course_blueprint:
  description: "Designs a multi-module course roadmap aligned to learning outcomes."
  response_format:
    type: object
    properties:
      overview:
        type: object
        properties:
          positioning:
            type: string
            description: "Why this course matters for the stated audience."
          target_audience:
            type: string
            description: "Audience reiterated with nuance for delivery."
          total_duration_hours:
            type: string
            description: "Estimated total completion time for the full course."
          pacing_strategy:
            type: string
            description: "How modules build on each other week-by-week or session-by-session."
          prerequisites:
            type: array
            items:
              type: string
            description: "Recommended learner preparation."
        required:
          - positioning
          - target_audience
          - total_duration_hours
          - pacing_strategy
          - prerequisites
      modules:
        type: array
        description: "List of modules that collectively satisfy all learning outcomes."
        items:
          type: object
          properties:
            number:
              type: integer
              description: "Module sequence number."
            title:
              type: string
              description: "Module title."
            summary:
              type: string
              description: "High-level purpose of the module."
            outcomes:
              type: array
              items:
                type: string
              description: "Subset of learning outcomes emphasized here."
            key_topics:
              type: array
              items:
                type: string
              description: "Essential concepts or skills covered."
            learning_activities:
              type: array
              description: "Recommended learning assets within this module."
              items:
                type: object
                properties:
                  activity_type:
                    type: string
                    description: "Format (video, reading, workshop, discussion, etc.)."
                  description:
                    type: string
                  duration_minutes:
                    type: integer
                    description: "Approximate time commitment."
                  outcome_alignment:
                    type: string
                    description: "Outcome reinforced by the activity."
            assessment:
              type: object
              properties:
                format:
                  type: string
                description:
                  type: string
              required:
                - format
                - description
            resources:
              type: array
              items:
                type: string
              description: "Supplemental resources or job aids."
            project_milestone:
              type: string
              description: "How the capstone or practical assignment advances during this module."
        minItems: 3
      capstone:
        type: object
        properties:
          description:
            type: string
          deliverables:
            type: array
            items:
              type: string
          evaluation:
            type: string
        required:
          - description
          - deliverables
          - evaluation
    required:
      - overview
      - modules
      - capstone
  messages:
    - role: system
      template: |
        You are an award-winning curriculum architect.
        Respond only with minified JSON matching this schema:
        {
          "overview": {
            "positioning": "string",
            "target_audience": "string",
            "total_duration_hours": "string",
            "pacing_strategy": "string",
            "prerequisites": ["string"]
          },
          "modules": [
            {
              "number": 1,
              "title": "string",
              "summary": "string",
              "outcomes": ["string"],
              "key_topics": ["string"],
              "learning_activities": [
                {
                  "activity_type": "string",
                  "description": "string",
                  "duration_minutes": 45,
                  "outcome_alignment": "string"
                }
              ],
              "assessment": {"format": "string", "description": "string"},
              "resources": ["string"],
              "project_milestone": "string"
            }
          ],
          "capstone": {
            "description": "string",
            "deliverables": ["string"],
            "evaluation": "string"
          }
        }
        Design enough modules to fully cover every learning outcome, blending foundational sequencing, practice, and assessment.
        Spread outcomes across modules thoughtfully—avoid duplicating the exact same list in each module.
    - role: user
      template: |
        Course Title: {{ course_title }}
        Audience: {{ audience or "General learners" }}
        Tone: {{ tone or "Professional and supportive" }}
        Target Session Duration: {{ duration_minutes or "60" }} minutes
        Learning Outcomes:
        {% for outcome in learning_outcomes %}
        - {{ outcome }}
        {% endfor %}
        Produce the JSON course roadmap now.

combined_course:
  description: "Compiles all course assets into a single JSON payload."
  response_format:
    type: object
    properties:
      course:
        type: object
        properties:
          title:
            type: string
          audience:
            type: string
          tone:
            type: string
          learning_outcomes:
            type: array
            items:
              type: string
        required:
          - title
          - audience
          - tone
          - learning_outcomes
      video_script: *video_script_format
      reading_material: *reading_format
      quiz_questions: *quiz_format
      project_assignment: *project_format
    required:
      - course
      - video_script
      - reading_material
      - quiz_questions
      - project_assignment
  messages:
    - role: system
      template: |
        You are compiling a complete asynchronous course package.
        Output must be valid minified JSON with this top-level shape:
        {
          "course": {
            "title": "string",
            "audience": "string",
            "tone": "string",
            "learning_outcomes": ["string"]
          },
          "video_script": { ... },
          "reading_material": { ... },
          "quiz_questions": { ... },
          "project_assignment": { ... }
        }
        Each nested section MUST follow the schemas used in their dedicated prompts.
    - role: user
      template: |
        Course Title: {{ course_title }}
        Audience: {{ audience or "General learners" }}
        Tone: {{ tone or "Professional and friendly" }}
        Target Video Duration: {{ duration_minutes or "10" }} minutes
        Project Effort: {{ project_duration or "6-8 hours" }}
        Learning Outcomes:
        {% for outcome in learning_outcomes %}
        - {{ outcome }}
        {% endfor %}
        Produce the complete JSON package now.
